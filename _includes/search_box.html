{% assign placeholder = include.placeholder | default: 'UGL Collections...' %}
{% assign key = include.search | default: 'main' %}
{% assign config = site.search[key] %}
{% assign index = config.index | absolute_url %}

{%- capture fields -%}
  {%- for collection in config.collections -%}
    {%- for field in collection[1].fields -%}
      {{ field }}{% unless forloop.last %}|||{% endunless %}
    {%- endfor -%}
  {%- endfor -%}
{%- endcapture -%}
{% assign fields = fields | split: '|||' | uniq %}

<!-- Search Block -->
<div class='search-block'>
  <div class='input-group'>
    <span class="input-group-text">
      <i class="fas fa-search"></i>
    </span>
    <input type='text' class='form-control' id='search' name='x' placeholder='{{ placeholder }}'>
  </div>
  <div id='results'></div>
</div>

<!-- Scripts -->
<script type='text/javascript' src="{{ '/assets/js/elasticlunr.min.js' | absolute_url }}"></script>
<script type='text/javascript' src="{{ '/assets/js/search-ui.js' | absolute_url }}"></script>
<script type='text/javascript'>
  var fields    = {{ fields | jsonify }};
  var indexFile = "{{ index }}";
  var url       = "{{ '/' | absolute_url }}";
  console.log(url);
  $(document).ready(function() {
    startSearchUI(fields, indexFile, url);
  });
</script>

<!-- Font Awesome (for search icon) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
