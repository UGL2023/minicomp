{% comment %}
  gallery.html
  Safely renders a gallery from include.items or site data.
  Avoids errors if items are null or empty.
{% endcomment %}

{% assign gallery_items = include.items %}

{% if gallery_items and gallery_items != empty %}
  {% assign sorted_items = gallery_items | sort: 'title' %}

  <div class="gallery">
    {% for item in sorted_items %}
      <div class="gallery-item">
        {% if item.image %}
          <img src="{{ item.image }}" alt="{{ item.title | default: 'Gallery image' }}">
        {% endif %}
        {% if item.title %}
          <h3>{{ item.title }}</h3>
        {% endif %}
        {% if item.description %}
          <p>{{ item.description }}</p>
        {% endif %}
      </div>
    {% endfor %}
  </div>

{% else %}
  <p>No gallery items available.</p>
{% endif %}
